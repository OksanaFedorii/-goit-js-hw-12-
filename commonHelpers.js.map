{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst API_KEY = '43843798-e4c61f3cfe0ada13281a73887';\nconst BASE_URL = 'https://pixabay.com/api/'; \n\ndocument.addEventListener('DOMContentLoaded', function() {\n    const form = document.querySelector('.js-search-form'); \n    const galleryEl = document.querySelector('.gallery'); \n\n    form.addEventListener('submit', function(event) {\n        event.preventDefault(); \n        const input = document.querySelector('.js-search-input'); \n        const inputValue = input.value; \n\n        fetchPhotosByQuery(inputValue) \n            .then(data => {\n                galleryEl.innerHTML = createGalleryItemMarkup(data.hits);\n                console.log(data.hits); \n                initializeLightbox();\n            })\n            .catch(error => {\n                console.error('Fetch error:', error);\n            }); \n    });\n});\n\nexport const fetchPhotosByQuery = (q) => {\n    const searchParams = new URLSearchParams({\n        q,\n        key: API_KEY,\n        per_page: 20,\n        image_type: \"photo\",\n        orientation: 'horizontal',\n        safesearch: true\n    });\n\n    return fetch(`${BASE_URL}?${searchParams}`)\n        .then(response => {\n            if (!response.ok) {\n                throw new Error('Network response was not ok');\n            }\n            return response.json();\n        });\n};\n\nexport function createGalleryItemMarkup(items) {\n    return items.map(item => `\n        <a href=\"${item.largeImageURL}\" class=\"gallery-item\" data-lightbox=\"gallery\">\n            <img src=\"${item.webformatURL}\" alt=\"${item.tags}\" />\n            <div class=\"card-body\">\n              <ul class=\"list-group list-group-flush\">\n                <li class=\"list-group-item\"><strong>Likes</strong> ${item.likes}</li>\n                <li class=\"list-group-item\"><strong>Views</strong> ${item.views}</li>\n                <li class=\"list-group-item\"><strong>Comments</strong> ${item.comments}</li>\n                <li class=\"list-group-item\"><strong>Downloads</strong> ${item.downloads}</li>\n              </ul>\n            </div>\n        </a>   \n    `).join('');\n}\n\nfunction initializeLightbox() {\n    const lightbox = new SimpleLightbox('.gallery a', {\n        overlayOpacity: 1,\n        captionsData: 'alt',\n        captionsDelay: 250,\n        nav: true, \n        close: true, \n        showCounter: true, \n        animationSpeed: 300, \n        fadeSpeed: 300, \n    });\n\n    lightbox.refresh(); \n}","import iziToast from 'izitoast';\nimport { createGalleryItemMarkup } from './js/pixabay-api.js';\nimport { fetchPhotosByQuery } from './js/pixabay-api.js';\nimport 'izitoast/dist/css/iziToast.min.css';\n\ndocument.addEventListener('DOMContentLoaded', function () {\n    const form = document.querySelector('.js-search-form');\n    const galleryEl = document.querySelector('.gallery');\n    const loaderEl = document.querySelector('.loader');\n\n    form.addEventListener('submit', function (event) {\n        event.preventDefault();\n        const input = document.querySelector('.js-search-input');\n        const searchQuery = input.value.trim();\n\n        if (searchQuery === '') {\n            galleryEl.innerHTML = '';\n            input.value = '';\n            iziToast.show({\n                message: 'Input field can not be empty',\n                position: 'topRight',\n                timeout: 2000,\n                color: 'red',\n            });\n            return;\n        }\n\n        galleryEl.innerHTML = '';\n        loaderEl.classList.remove('is-hidden');\n\n        fetchPhotosByQuery(searchQuery)\n            .then(data => {\n                if (data.totalHits === 0) {\n                    iziToast.show({\n                        message: 'Sorry, there are no images for this query',\n                        position: 'topRight',\n                        timeout: 2000,\n                        color: 'red',\n                    });\n                } else {\n                    galleryEl.innerHTML = createGalleryItemMarkup(data.hits);\n                }\n            })\n            .catch(error => {\n                console.error('Fetch error:', error);\n                iziToast.show({\n                    message: 'Failed to load images',\n                    position: 'topRight',\n                    timeout: 2000,\n                    color: 'red',\n                });\n            })\n            .finally(() => {\n                input.value = '';\n                loaderEl.classList.add('is-hidden');\n            });\n    });\n});\n"],"names":["API_KEY","BASE_URL","form","galleryEl","event","inputValue","fetchPhotosByQuery","data","createGalleryItemMarkup","initializeLightbox","error","q","searchParams","response","items","item","SimpleLightbox","loaderEl","input","searchQuery","iziToast"],"mappings":"6vBAGA,MAAMA,EAAU,qCACVC,EAAW,2BAEjB,SAAS,iBAAiB,mBAAoB,UAAW,CACrD,MAAMC,EAAO,SAAS,cAAc,iBAAiB,EAC/CC,EAAY,SAAS,cAAc,UAAU,EAEnDD,EAAK,iBAAiB,SAAU,SAASE,EAAO,CAC5CA,EAAM,eAAc,EAEpB,MAAMC,EADQ,SAAS,cAAc,kBAAkB,EAC9B,MAEzBC,EAAmBD,CAAU,EACxB,KAAKE,GAAQ,CACVJ,EAAU,UAAYK,EAAwBD,EAAK,IAAI,EACvD,QAAQ,IAAIA,EAAK,IAAI,EACrBE,GAChB,CAAa,EACA,MAAMC,GAAS,CACZ,QAAQ,MAAM,eAAgBA,CAAK,CACnD,CAAa,CACb,CAAK,CACL,CAAC,EAEM,MAAMJ,EAAsBK,GAAM,CACrC,MAAMC,EAAe,IAAI,gBAAgB,CACrC,EAAAD,EACA,IAAKX,EACL,SAAU,GACV,WAAY,QACZ,YAAa,aACb,WAAY,EACpB,CAAK,EAED,OAAO,MAAM,GAAGC,CAAQ,IAAIW,CAAY,EAAE,EACrC,KAAKC,GAAY,CACd,GAAI,CAACA,EAAS,GACV,MAAM,IAAI,MAAM,6BAA6B,EAEjD,OAAOA,EAAS,MAC5B,CAAS,CACT,EAEO,SAASL,EAAwBM,EAAO,CAC3C,OAAOA,EAAM,IAAIC,GAAQ;AAAA,mBACVA,EAAK,aAAa;AAAA,wBACbA,EAAK,YAAY,UAAUA,EAAK,IAAI;AAAA;AAAA;AAAA,qEAGSA,EAAK,KAAK;AAAA,qEACVA,EAAK,KAAK;AAAA,wEACPA,EAAK,QAAQ;AAAA,yEACZA,EAAK,SAAS;AAAA;AAAA;AAAA;AAAA,KAIlF,EAAE,KAAK,EAAE,CACd,CAEA,SAASN,GAAqB,CACT,IAAIO,EAAe,aAAc,CAC9C,eAAgB,EAChB,aAAc,MACd,cAAe,IACf,IAAK,GACL,MAAO,GACP,YAAa,GACb,eAAgB,IAChB,UAAW,GACnB,CAAK,EAEQ,QAAO,CACpB,CCtEA,SAAS,iBAAiB,mBAAoB,UAAY,CACtD,MAAMd,EAAO,SAAS,cAAc,iBAAiB,EAC/CC,EAAY,SAAS,cAAc,UAAU,EAC7Cc,EAAW,SAAS,cAAc,SAAS,EAEjDf,EAAK,iBAAiB,SAAU,SAAUE,EAAO,CAC7CA,EAAM,eAAc,EACpB,MAAMc,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAcD,EAAM,MAAM,KAAI,EAEpC,GAAIC,IAAgB,GAAI,CACpBhB,EAAU,UAAY,GACtBe,EAAM,MAAQ,GACdE,EAAS,KAAK,CACV,QAAS,+BACT,SAAU,WACV,QAAS,IACT,MAAO,KACvB,CAAa,EACD,MACH,CAEDjB,EAAU,UAAY,GACtBc,EAAS,UAAU,OAAO,WAAW,EAErCX,EAAmBa,CAAW,EACzB,KAAKZ,GAAQ,CACNA,EAAK,YAAc,EACnBa,EAAS,KAAK,CACV,QAAS,4CACT,SAAU,WACV,QAAS,IACT,MAAO,KAC/B,CAAqB,EAEDjB,EAAU,UAAYK,EAAwBD,EAAK,IAAI,CAE3E,CAAa,EACA,MAAMG,GAAS,CACZ,QAAQ,MAAM,eAAgBA,CAAK,EACnCU,EAAS,KAAK,CACV,QAAS,wBACT,SAAU,WACV,QAAS,IACT,MAAO,KAC3B,CAAiB,CACjB,CAAa,EACA,QAAQ,IAAM,CACXF,EAAM,MAAQ,GACdD,EAAS,UAAU,IAAI,WAAW,CAClD,CAAa,CACb,CAAK,CACL,CAAC"}